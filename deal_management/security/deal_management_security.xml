<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data noupdate="1">
    <!-- Salesperson: Own deals only -->
    <record id="deal_salesperson_rule" model="ir.rule">
      <field name="name">Sales Person: Own Deals</field>
      <field name="model_id" ref="model_deal_management"/>
      <field name="domain_force">[("create_uid", "=", user.id)]</field>
      <field name="groups" eval="[(4, ref('sales_team.group_sale_salesman'))]"/>
    </record>

    <!-- Manager: All deals -->
    <record id="deal_manager_rule" model="ir.rule">
      <field name="name">Manager: All Deals</field>
      <field name="model_id" ref="model_deal_management"/>
      <field name="domain_force">[(1, "=", 1)]</field>
      <field name="groups" eval="[(4, ref('sales_team.group_sale_manager'))]"/>
    </record>

    <!-- Company isolation -->
    <record id="deal_company_rule" model="ir.rule">
      <field name="name">Company: Own Company</field>
      <field name="model_id" ref="model_deal_management"/>
      <field name="domain_force">[("company_id", "=", user.company_id.id)]</field>
      <field name="groups" eval="[(4, ref('base.group_user'))]"/>
    </record>

    <!-- Deal lines company rule -->
    <record id="deal_line_company_rule" model="ir.rule">
      <field name="name">Deal Line: Company</field>
      <field name="model_id" ref="model_deal_line"/>
      <field name="domain_force">[("company_id", "=", user.company_id.id)]</field>
      <field name="groups" eval="[(4, ref('base.group_user'))]"/>
    </record>
  </data>
</odoo>
